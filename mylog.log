Лабораторная работа №1

Романов Егор 3342

uname@cpname:~$ echo "Дата:; date (запись текущей даты) 
Дата:
25 фев 2025 19:40:13 MSK

uname@cpname:~$ whoami (имя пользователя)
uname

uname@cpname:~$ tty (имя терминала)
/dev/pts/0

uname@cpname:~$ uname (название операционной системы)
Linux

uname@cpname:~$ who (вывод информации о пользователях в системе)
uname    seat0        2025-02-25 19:32 (login screen)
uname    tty2         2025-02-25 19:32 (tty2)

uname@cpname:~$ (date && ls) (вывод всех файлов в каталоге)
Вт 25 фев 2025 19:50:59 MSK
mylog.log
snap
Видео
Документы
Загрузки
Изображения
Музыка
Общедоступные
Рабочий стол
Шаблоны

uname@cpname:~$ (date && ls -l) (вывод подробной информации о файлах в каталоге)
Вт 25 фев 2025 19:51:40 MSK
итого 40
-rw-rw-r-- 1 uname uname  921 фев 25 19:51 mylog.log
drwx------ 7 uname uname 4096 фев 25 15:00 snap
drwxr-xr-x 2 uname uname 4096 фев 25 10:57 Видео
drwxr-xr-x 2 uname uname 4096 фев 25 10:57 Документы
drwxr-xr-x 2 uname uname 4096 фев 25 14:21 Загрузки
drwxr-xr-x 2 uname uname 4096 фев 25 10:57 Изображения
drwxr-xr-x 2 uname uname 4096 фев 25 10:57 Музыка
drwxr-xr-x 2 uname uname 4096 фев 25 10:57 Общедоступные
drwxr-xr-x 2 uname uname 4096 фев 25 10:57 Рабочий стол
drwxr-xr-x 2 uname uname 4096 фев 25 10:57 Шаблоны

uname@cpname:~$ (date && lscpu | head -n 15) (получение информации о процессоре)
Вт 25 фев 2025 19:54:32 MSK
Архитектура:                          x86_64
CPU op-mode(s):                       32-bit, 64-bit
Address sizes:                        48 bits physical, 48 bits virtual
Порядок байт:                         Little Endian
CPU(s):                               4
On-line CPU(s) list:                  0-3
ID прроизводителя:                    AuthenticAMD
Имя модели:                           AMD Ryzen 5 4500U with Radeon Graphics
Семейство ЦПУ:                        23
Модель:                               96
Потоков на ядро:                      1
Ядер на сокет:                        4
Сокетов:                              1
Степпинг:                             1
BogoMIPS:                             4741,08


uname@cpname:~$ (date && lshw | head -n 15) (вывод информации об аппаратных компонентах системы (только верхние 15 строк, т.к. полный вывод слишком объёмный)) 
Вт 25 фев 2025 19:56:19 MSK
cpname
    описание: Computer
    разрядность: 64 bits
    возможности: smp vsyscall32
  *-core
       описание: Motherboard
       физический ID: 0
     *-memory
          описание: Системная память
          физический ID: 0
          размер: 3200MiB
     *-cpu
          продукт: AMD Ryzen 5 4500U with Radeon Graphics
          производитель: Advanced Micro Devices [AMD]
          физический ID: 1


uname@cpname:~$ (date && uname -a) (вывод информации о системе)
Вт 25 фев 2025 19:59:39 MSK
Linux cpname 6.11.0-17-generic #17~24.04.2-Ubuntu SMP PREEMPT_DYNAMIC Mon Jan 20 22:48:29 UTC 2 x86_64 x86_64 x86_64 GNU/Linux


Выполнение работы
Задание 1

    Обычный файл (-)
        uname@cpname:~$ (sudo date && ls -lR 2>/dev/null | grep "^-" | head -n 1) (получение имени файла)
            Вт 25 фев 2025 20:05:08 MSK
            -rw-rw-r-- 1 uname uname 3793 фев 25 20:05 mylog.log

        uname@cpname:~$ (date && sudo find / -name "mylog.log" 2>/dev/null | head -n 1 ) (получение полного пути)
            Вт 25 фев 2025 20:11:19 MSK
            /home/uname/mylog.log

    Файл блочного устройства (b)
        uname@cpname:/$ (date && sudo ls -lR 2>/dev/null  | grep '^b' | head -n 1)
            Вт 25 фев 2025 20:33:51 MSK
            br--------  1 root  root     11,   1 фев 25 19:55 cdrom1

        uname@cpname:/$ (date && sudo find / -name "cdrom1" 2>/dev/null)                        
            Вт 25 фев 2025 20:35:40 MSK
            /dev/cdrom1

    Файл символьного устройства (c)
        uname@cpname:/$ (date && sudo ls -lR 2>/dev/null  | grep '^c' | head -n 1)
            Вт 25 фев 2025 20:37:17 MSK
            crw-r--r--  1 root  root     10, 235 фев 25 19:30 autofs

        uname@cpname:/$ (date && sudo find / -name "autofs" 2>/dev/null | head -n 1)
            Вт 25 фев 2025 20:38:26 MSK
            /usr/lib/modules/6.11.0-17-generic/kernel/fs/autofs

    Директория (d)
        name@cpname:/$ (date && sudo ls -lR 2>/dev/null  | grep '^d' | head -n 1)
            Вт 25 фев 2025 20:39:33 MSK
            drwxr-xr-x   2 root root       4096 фев 26  2024 bin.usr-is-merged

        uname@cpname:/$ (date && sudo find / -name "bin.usr-is-merged" 2>/dev/null | head -n 1) 
            Вт 25 фев 2025 20:41:11 MSK
            /bin.usr-is-merged


    Символьная ссылка (l)
        uname@cpname:/$ (date && sudo ls -lR 2>/dev/null  | grep '^l' | head -n 1)
            Вт 25 фев 2025 20:42:33 MSK
            lrwxrwxrwx   1 root root          7 апр 22  2024 bin -> usr/bin

        uname@cpname:/$ (date && sudo find / -name "bin" 2>/dev/null)
            Вт 25 фев 2025 20:43:15 MSK
            /bin

    Именованный канал (FIFO)
        uname@cpname:/$ (date && sudo ls -lR 2>/dev/null  | grep '^p' | head -n 1)
            Вт 25 фев 2025 20:47:43 MSK
            prw-------  1 root              root      0 фев 25 19:30 initctl
            
        uname@cpname:/$ (date && sudo find / -name "initctl" 2>/dev/null)
            Вт 25 фев 2025 20:48:09 MSK
            /run/initctl

    Сокет (s)
        uname@cpname:/$ (date && sudo ls -lR 2>/dev/null  | grep '^s' | head -n 1)
            Вт 25 фев 2025 20:49:56 MSK
            srw-rw-rw-  1 root              root      0 фев 25 19:30 snapd-snap.socket

        uname@cpname:/$ (date && sudo find / -name "snapd-snap.socket" 2>/dev/null)
            Вт 25 фев 2025 20:50:35 MSK
            /run/snapd-snap.socket

    Напишем скрипт для выполнения этого задания 
    
    uname@cpname:~$ (date && touch res.txt) (создание файла, где будет сохранён результат)
    Вт 25 фев 2025 21:00:45 MSK

    uname@cpname:~$ (date && cat res.txt) (содержимое файла до запуска скрипта)
    Вт 25 фев 2025 21:01:41 MSK

    uname@cpname:~$ (date && ./first.sh res.txt) (заупск скрипта)
    Вт 25 фев 2025 21:02:37 MSK
    Поиск...
    Записано в res.txt

    uname@cpname:~$ (date && cat res.txt) (содержимое после выполнения скрипта)
    Вт 25 фев 2025 21:03:21 MSK
    lrwxrwxrwx /usr/bin
    drwxr-xr-x /bin.usr-is-merged
    -rw------- /swap.img
    crw-r--r-- /dev/autofs
    br-------- /dev/cdrom1
    prw------- /run/initctl
    srw-rw-rw- /run/snapd-snap.socket

Задание 2
    uname@cpname:~$ (date && touch linkfile.txt) (создадим файл, на который будут делаться ссылки)
    Вт 25 фев 2025 21:09:03 MSK

    uname@cpname:~$ (date && mkdir linkdir) (создадим директорию, из которой будет одна из ссылок)
    Вт 25 фев 2025 21:09:46 MSK

    uname@cpname:~$ (date && ln linkfile.txt flink) (создали первую ссылку)
    Вт 25 фев 2025 21:11:54 MSK

    uname@cpname:~$ (date && mkdir linkdir)
    Вт 25 фев 2025 21:15:18 MSK

    uname@cpname:~$ (date && cd linkdir)
    Вт 25 фев 2025 21:15:55 MSK

    uname@cpname:~/linkdir$ (date && ln ../linkfile.txt slink) (создали вторую ссылку)
    Вт 25 фев 2025 21:16:47 MSK
    
    uname@cpname:~$ (date && ls -li linkfile.txt | awk '{print $1}') (получили inode файла linkfile.txt)
    Вт 25 фев 2025 21:27:05 MSK
    919493

    uname@cpname:~$ (date && ls -lRi | grep "919493") (получили все файл с таким же inode: сам файл и жесткие ссылки на него)
    Вт 25 фев 2025 21:28:32 MSK
    919493 -rw-rw-r-- 3 uname uname    0 фев 25 21:09 flink
    919493 -rw-rw-r-- 3 uname uname    0 фев 25 21:09 linkfile.txt
    919493 -rw-rw-r-- 3 uname uname  0 фев 25 21:09 slink
    Полученные файлы это как раз те ссылки, которые были созданы командами выше

    Напишем скрипт для выполнения этого задания

    uname@cpname:~$ (date && touch sres.txt) (создадим файл, куда будет записан результат) 
    Вт 25 фев 2025 22:11:01 MSK

    uname@cpname:~$ (date && cat sres.txt) (состояние файл до использования скрипта)
    Вт 25 фев 2025 22:12:01 MSK

    uname@cpname:~$ (date && ./second.sh linkfile.txt sres.txt)
    Вт 25 фев 2025 22:12:54 MSK
    Файл найден. Результаты сохранены в sres.txt.

    uname@cpname:~$ (date && cat sres.txt) (состояние файла после использования скрипта)
    Вт 25 фев 2025 22:14:59 MSK
    919493 -rw-rw-r-- 3 uname uname     0 фев 25 21:48 flink
    919493 -rw-rw-r-- 3 uname uname     0 фев 25 21:48 linkfile.txt
    919493 -rw-rw-r-- 3 uname uname  0 фев 25 21:48 slink

    Скрипт записал в резльтат все ссылки на выбранный файл


Задание 3
    Рассмотрим способы создания символьных ссылок

    1) Создание при помощи ln с флагом -s
        uname@cpname:~$ (date && ln -s linkfile.txt newsymlink)
            Вт 25 фев 2025 22:29:40 MSK

        uname@cpname:~$ (date && ls -l newsymlink) (была создана символическая ссылка, это можно понять по типу файла (l))
            Вт 25 фев 2025 22:30:30 MSK
            lrwxrwxrwx 1 uname uname 12 фев 25 22:29 newsymlink -> linkfile.txt
            
    2) Создание при помощи link
    
        uname@cpname:~$ (date && cd linkdir) (переход в папку, гед будет созданаа ссылка)             
            Ср 26 фев 2025 10:26:36 MSK

        uname@cpname:~/linkdir$ (date && link ../linkfile.txt hard_link) (создание ссылки)
            Ср 26 фев 2025 10:29:05 MSK

        
        uname@cpname:~/linkdir$ (date && ls -li) (ссылка появилась в директории)
            Ср 26 фев 2025 10:30:46 MSK
            итого 0
            919493 -rw-rw-r-- 4 uname uname  0 фев 25 21:48 hard_link
            919493 -rw-rw-r-- 4 uname uname  0 фев 25 21:48 slink

        uname@cpname:~/linkdir$ (date && ls -li ../linkfile.txt | awk '{print $1}') (видно, что hard_link имеет тот же inode, что и linkfile.txt)
            Ср 26 фев 2025 10:31:32 MSK
            919493

    3) Создание при помощи cp с флагом -s

        uname@cpname:~/linkdir$ (date && cp -s ../linkfile.txt othersymlink) (создание символической ссылки)
            Ср 26 фев 2025 10:34:43 MSK

        uname@cpname:~/linkdir$ (date && ls -l) (ссылка появилась в директории и ссылка указывает на linkfile)
            Ср 26 фев 2025 10:35:41 MSK
            итого 0
            -rw-rw-r-- 4 uname uname  0 фев 25 21:48 hard_link
            lrwxrwxrwx 1 uname uname 15 фев 26 10:34 othersymlink -> ../linkfile.txt
            -rw-rw-r-- 4 uname uname  0 фев 25 21:48 slink

    Напишем скрипт для поиска всех сивольных ссылок
        uname@cpname:~$ (date && touch thres.txt) (создание файл, где будет сохранён результат)
            Ср 26 фев 2025 17:55:50 MSK 

        uname@cpname:~$ (date && cat thres.txt) (состояние до выполнения скрипта)
            Ср 26 фев 2025 17:56:36 MSK

        uname@cpname:~$ (date && ./third.sh linkfile.txt thres.txt) (выполнение скрипта)
            Ср 26 фев 2025 17:57:29 MSK
            Результаты сохранены в thres.txt
            Найдено символьных ссылок: 2
        первый аргумент - файл, для которого необходимо найти количество ссылок, второй - файл, куда будет записан результат

        uname@cpname:~$ (date && cat thres.txt) (содержимое файла после использования скрипта)
            Ср 26 фев 2025 17:59:14 MSK
            /home/uname/newsymlink
            /home/uname/linkdir/othersymlink
            Всего: 2

Задание 4
    Напишем скрипт для для получения всех символьных ссылок на заданный файл разными способами

    uname@cpname:~$ (date && touch fourthres.txt) (создание файла для записи результата)
        Ср 26 фев 2025 18:14:22 MSK
            
    uname@cpname:~$ (date && cat fourthres.txt) (содержимое файла до использования скрипта)
        Ср 26 фев 2025 18:14:46 MSK

    uname@cpname:~$ (date && ./fourth.sh linkfile.txt > fourthres.txt) (использование скрипта)
        Ср 26 фев 2025 18:18:21 MSK

    uname@cpname:~$ (date && cat fourthres.txt) (состояние файла после использования скрипта) 
        Ср 26 фев 2025 18:20:04 MSK
        Поиск с использованием find и stat:
        '/home/uname/newsymlink' -> 'linkfile.txt'
        '/home/uname/linkdir/othersymlink' -> '../linkfile.txt'


        Поиск с использованием find и -lname:
        /home/uname/newsymlink
        /home/uname/linkdir/othersymlink


        Поиск с использованием readlink в цикле:
        /home/uname/newsymlink -> linkfile.txt
        /home/uname/linkdir/othersymlink -> ../linkfile.txt


        Поиск с использованием ls и grep:
        lrwxrwxrwx  1 uname uname    12 фев 25 22:29 newsymlink -> linkfile.txt
        lrwxrwxrwx  1 uname uname   15 фев 26 10:34 othersymlink -> ../linkfile.txt


        Поиск с использованием find и realpath:
        /home/uname/newsymlink
        /home/uname/linkdir/othersymlink


        Поиск с использованием find и readlink -f:
        /home/uname/newsymlink
        /home/uname/linkdir/othersymlink


